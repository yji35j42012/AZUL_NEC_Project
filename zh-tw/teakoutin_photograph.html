<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name=" viewport" content=" width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv=" X-UA-Compatible" content=" ie=edge">
    <title>攜入拍照確認</title>
    <link rel="stylesheet" href="../style/font.css">
    <link rel="stylesheet" href="../style/reset.css">
    <link rel="stylesheet" href="../style/index.css">
</head>

<body>
    <div class="wrap tw">
        <div class="head">
            <span class="head_logo">
                <img src="../images/logo_s.png" alt="">
            </span>
            <span>2022/10/12 PM 12:26</span>
        </div>
        <div class="info_content">
            <ul class="step">
                <li class="step_item ">
                    <span class="step_item_num on">1</span>
                    <span class="step_item_txt w200px">
                        掃描QR Code
                        及識別證
                    </span>
                </li>
                <li class="step_line"></li>
                <li class="step_item">
                    <span class="step_item_num on">2</span>
                    <span class="step_item_txt">資料確認</span>
                </li>
                <li class="step_line"></li>
                <li class="step_item">
                    <span class="step_item_num on">3</span>
                    <span class="step_item_txt">拍照確認</span>
                </li>
                <li class="step_line"></li>
                <li class="step_item">
                    <span class="step_item_num">4</span>
                    <span class="step_item_txt">完成</span>
                </li>
            </ul>
            <h2>拍照確認</h2>
            <h3>請轉開鏡頭，確認設備於鏡頭畫面內</h3>

            <div class="takeout_pic w550px">
                <img src="../images/img_scan.svg" alt="">
            </div>
            <div class="facebox w400px"></div>
            <div class="reciprocal">
                倒數
                <!-- 書需要停止轉圈圈在class加on -->
                <span id="reciprocal_time" class="reciprocal_time">5</span>
                秒
            </div>
        </div>
        <div class="function _jufe">
            <button id="back" class="normal_icon_btn _prev">
                上一步
            </button>
            <button id="home" class="normal_icon_btn _home">
                回首頁
            </button>
            <button id="next" class="normal_icon_btn _next">
                下一步
            </button>
        </div>
    </div>
    <script>
        var back = document.querySelector('#back');
        back.onclick = function () {
            history.go(-1);
        }
        var next = document.querySelector('#next');
        next.onclick = function () {
            location.href = 'teakoutin_photograph.html';
        }
        var home = document.querySelector('#home');
        home.onclick = function () {
            location.href = 'index.html';
        }

        var reface = document.querySelector("#reface");
        var reciprocal_time = document.querySelector('#reciprocal_time');
        var time = 5;
        var fail_count = 0;
        var intervalId = setInterval(intervaHandler, 1000);
        function intervaHandler() {
            if (time !== 0) {
                time--
                reciprocal_time.innerHTML = time;
            } else {
                clearInterval(intervalId);
                reciprocal_time.classList.add('on');
                // 如辨識失敗加上on
                // alert.classList.add('on');
                if (fail_count == 2) {
                    // alert.classList.add('face_max_fail');
                } else {
                    // 錯誤次數
                    fail_count++;
                }
            }
        }

        reface.onclick = function () {
            alert.classList.remove('on');
            reciprocal_time.classList.remove('on');
            time = 5;
            reciprocal_time.innerHTML = time;
            intervalId = setInterval(intervaHandler, 1000);
        }
    </script>
</body>

</html>